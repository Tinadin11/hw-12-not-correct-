{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst KEY = '47181465-58855b534a7ed572abb95719a';\n\nexport async function getPictures(query, page) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15, // по 15 картинок на кожній сторінці\n      },\n    });\n\n    if (response.status !== 200 || !response.data) {\n  throw new Error('Error receiving data from API');\n}\n\n    return response.data; // Повертаємо дані для подальшої обробки\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Sorry! Connection problems. Please try later!',\n      position: 'bottomRight',\n    });\n    console.error(error.message);\n  }\n}\n","export function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" />\n          </a>\n          <ul class=\"info-list\">\n            <li class=\"info-item\">\n              <h2 class=\"subtitle\">Likes</h2>\n              <p class=\"info\">${likes}</p>\n            </li>\n            <li class=\"info-item\">\n              <h2 class=\"subtitle\">Views</h2>\n              <p class=\"info\">${views}</p>\n            </li>\n            <li class=\"info-item\">\n              <h2 class=\"subtitle\">Comments</h2>\n              <p class=\"info\">${comments}</p>\n            </li>\n            <li class=\"info-item\">\n              <h2 class=\"subtitle\">Downloads</h2>\n              <p class=\"info\">${downloads}</p>\n            </li>\n          </ul>\n        </li>`\n    )\n    .join('');\n}\n\nexport function updateLoadMoreButton(isVisible) {\n  const button = document.querySelector('.button-load');\n  button.style.display = isVisible ? 'block' : 'none';\n}\n\nexport function updateLoadingMessage(isVisible) {\n  const loadingMessage = document.querySelector('#loading-message');\n  loadingMessage.style.display = isVisible ? 'block' : 'none';\n}\n\nexport function displayEndMessage() {\n  iziToast.info({\n    title: 'End of results',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'bottomRight',\n  });\n  updateLoadMoreButton(false);\n}\n","// main.js\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getPictures } from \"./js/pixabay-api\";\nimport { createMarkup, updateLoadMoreButton, updateLoadingMessage, displayEndMessage } from \"./js/render-functions\";\n\nlet currentPage = 1;\nlet searchQuery = '';\nconst form = document.querySelector('.form-search');\nconst gallery = document.querySelector('.gallery');\nconst buttonLoad = document.querySelector('.button-load');\nconst input = document.querySelector('.input-search');\n\nbuttonLoad.style.display = 'none'; // Спочатку кнопка прихована\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  gallery.innerHTML = ''; // Очищаємо попередні результати\n  buttonLoad.style.display = 'none'; // Приховуємо кнопку \"Load more\"\n  updateLoadingMessage(true); // Показуємо повідомлення про завантаження\n  searchQuery = input.value.trim();\n  if (!searchQuery) {\n    iziToast.warning({ title: 'Caution', message: 'Please complete the field!' });\n    return;\n  }\n  currentPage = 1; // Скидаємо сторінку до 1 при новому пошуку\n  await renderPictures(searchQuery, currentPage);\n});\n\nasync function renderPictures(query, page) {\n  try {\n    const data = await getPictures(query, page);\n    const totalPages = Math.ceil(data.totalHits / 15); // Обчислюємо загальну кількість сторінок\n\n    if (!data.hits.length) {\n      iziToast.error({\n        title: 'Error',\n        message: `No results found for \"${searchQuery}\". Please try again.`,\n      });\n      updateLoadMoreButton(false); // Якщо немає результатів, кнопка не з'являється\n      return;\n    }\n\n    gallery.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    lightbox.refresh(); // Оновлюємо екземпляр SimpleLightbox\n\n    if (page >= totalPages) {\n      displayEndMessage(); // Виводимо повідомлення, якщо досягли кінця результатів\n    } else {\n      updateLoadMoreButton(true); // Показуємо кнопку \"Load more\"\n    }\n\n    updateLoadingMessage(false); // Ховаємо повідомлення про завантаження\n\n    window.scrollBy({\n      top: document.querySelector('.gallery-item').getBoundingClientRect().height * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Sorry, something went wrong!',\n      position: 'bottomRight',\n    });\n    updateLoadingMessage(false); // Ховаємо повідомлення\n  }\n}\n\nbuttonLoad.addEventListener('click', async () => {\n  currentPage += 1;\n  updateLoadingMessage(true);\n  try {\n    await renderPictures(searchQuery, currentPage);\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Sorry, something went wrong!',\n    });\n  }\n  updateLoadingMessage(false);\n});\n\n// Функція для ініціалізації VANTA.BIRDS\nfunction initVantaBackground() {\n  const backgroundElement = document.querySelector(\"#vanta-bg\"); // Вибір елемента для фону\n  if (backgroundElement) {\n    VANTA.BIRDS({\n      el: backgroundElement, // вказуємо, що фон буде на цьому елементі\n      mouseControls: true,\n      touchControls: true,\n      gyroControls: false,\n      minHeight: 200.00,\n      minWidth: 200.00,\n      scale: 1.00,\n      scaleMobile: 1.00,\n      backgroundColor: 0x190d70,\n      color1: 0x33a7,\n      color2: 0xcfcbeb,\n      colorMode: \"lerp\",\n      birdSize: 2.20,\n      wingSpan: 22.00,\n      speedLimit: 5.00,\n      separation: 54.00,\n      alignment: 60.00,\n      cohesion: 37.00,\n      quantity: 4.00,\n      backgroundAlpha: 0.64\n    });\n  }\n}\n\n// Виклик функції для ініціалізації фонового ефекту після завантаження сторінки\nwindow.onload = initVantaBackground;\n\n"],"names":["KEY","getPictures","query","page","response","axios","error","iziToast","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","updateLoadMoreButton","isVisible","button","updateLoadingMessage","loadingMessage","displayEndMessage","currentPage","searchQuery","form","gallery","buttonLoad","input","event","renderPictures","data","totalPages","SimpleLightbox","initVantaBackground","backgroundElement"],"mappings":"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"}